"\"\"\"Intent extraction primitives.\"\"\"\n\nfrom __future__ import annotations\n\nfrom dataclasses import dataclass\nfrom typing import Iterable\n\n\n@dataclass(slots=True)\nclass IntentExtractionResult:\n    \"\"\"Represents a parsed user intent.\"\"\"\n\n    intent: str\n    confidence: float\n    entities: dict[str, str]\n\n\nclass IntentClassifier:\n    \"\"\"Simple keyword-based classifier used until the NLP model is integrated.\"\"\"\n\n    def __init__(self, keywords: dict[str, Iterable[str]] | None = None) -> None:\n        self._keywords = keywords or {\n            \"add_garment\": {\"Ð´Ð¾Ð±Ð°Ð²ÑŒ\", \"Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸\", \"Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ\"},\n            \"today_outfit\": {\"Ñ‡Ñ‚Ð¾ Ð½Ð°Ð´ÐµÑ‚ÑŒ\", \"Ð¾Ð±Ñ€Ð°Ð·\", \"Ð»ÑƒÐº\"},\n            \"feedback_positive\": {\"Ð½Ñ€Ð°Ð²Ð¸Ñ‚ÑÑ\", \"ÐºÐ»Ð°ÑÑ\", \"ðŸ”¥\"},\n            \"feedback_negative\": {\"Ð½Ðµ Ð½Ñ€Ð°Ð²Ð¸Ñ‚ÑÑ\", \"ÑƒÐ¶Ð°Ñ\", \"ðŸ‘Ž\"},\n        }\n\n    def parse_message(self, message: str) -> IntentExtractionResult:\n        \"\"\"Return a naive classification result based on keyword matching.\"\"\"\n\n        lower = message.lower()\n        for intent, synonyms in self._keywords.items():\n            if any(keyword in lower for keyword in synonyms):\n                return IntentExtractionResult(intent=intent, confidence=0.6, entities={})\n        return IntentExtractionResult(intent=\"unknown\", confidence=0.1, entities={})\n*** End Patch
